services:
    thinframe.karma.listeners.commander:
        class: 'ThinFrame\Karma\Listeners\CommanderListener'
        arguments: ['@thinframe.cli.commander','@thinframe.cli.arguments_container']
        tags:
            - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.exception:
        class: 'ThinFrame\Karma\Listeners\ErrorListener'
        tags:
            - {name: 'thinframe.events.listener'}
        calls:
            - [setLogger, ['@thinframe.karma.logger.cli']]

    thinframe.karma.listeners.cli_exceptions:
        class: 'ThinFrame\Karma\Listeners\CliErrorListener'
        arguments: ['@thinframe.cli.shortcodes_output_driver']
        tags:
            - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.request:
        class: 'ThinFrame\Karma\Listeners\RequestListener'
        arguments: ['@thinframe.karma.logger.server']
        tags:
            - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.assets_resolver:
        class: 'ThinFrame\Karma\Listeners\AssetsResolverListener'
        arguments: ['%karma.paths.assets%','@thinframe.server.react.event_loop']
        tags:
          - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.packages_extradata:
        class: 'ThinFrame\Karma\Listeners\PackagesExtradataListener'
        tags:
          - {name: 'thinframe.events.listener'}

    thinframe.karma.kisteners.routes_preloader:
        class: 'ThinFrame\Karma\Listeners\RoutesPreloaderListener'
        arguments: ['@thinframe.annotations.processor']
        tags:
          - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.routes_resolver:
        class: 'ThinFrame\Karma\Listeners\RouteResolverListener'
        arguments: ['@thinframe.karma.route_collection']
        tags:
          - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.signal:
        class: 'ThinFrame\Karma\Listeners\SignalListener'
        arguments: ['@thinframe.pcntl.signal_catcher','@thinframe.server.react.event_loop']
        tags:
          - {name: 'thinframe.events.listener'}

    thinframe.karma.listeners.whoops:
        class: 'ThinFrame\Karma\Listeners\WhoopsListener'
        arguments: ['@thinframe.karma.whoops.run']
        tags:
          - {name: 'thinframe.events.listener'}
